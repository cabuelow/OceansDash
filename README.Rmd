---
output: github_document
---

<!-- README.md is generated from README.Rmd. If that is this file, please go ahead and edit then knit. If it isn't then DON'T edit - only edit the README.Rmd -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# Oceans Monitoring, Evaluation & Learning Dashboard

The Oceans Dashboard displays indicator time-series data to monitor progress towards goals for nature, people, and climate.

[Installation](#installation) | [Development TODO](#development-todo) | [Instructions for contributing](#instructions-for-contributing) | [Navigating and editing OceansDash](#navigating-and-editing-oceansdash)

## Installation

If you wish to run the Oceans Dashboard offline, you can install the development version from Github using:

``` r
devtools::install_github("cabuelow/OceansDash")
```

and run the application using:

``` r
library(OceansDash)
run_app()
```

Please note however, that the above download and installation is not required if you simply want to use the Oceans Dashboard. The latest version is available on the [Shiny Server](https://cbuelow.shinyapps.io/OceansDash/)

## Development TODO

- Modularise the tabPanel (Nature, Climate, People) ui and server logic as it is the same across tabPanels (just different indicators)
- Turn plotting and wrangling code that is repeated within the app into 'business logic' functions - either as functions (fct) or utilities (utils)
- The app is quite slow when subsetting data for different countries/regions to plot, see if can improve

- Finish WWF requests:

  - Consider using a more user-friendly widget for selecting regions/countries, some [inspiration here](https://dreamrs.github.io/shinyWidgets/) - maybe the boostrap select picker would be better than what we currently have?
  
  - Add [tooltips or a popover](https://shiny.posit.co/blog/posts/bslib-tooltips/) with definitions/datasources for each indicator selected. Not straight forward, a [potential solution here](Tooltips for checkable boxes: https://stackoverflow.com/questions/61112013/shiny-tooltip-for-each-check-able-box-basic)
  
  - Mapping
    - Change name of basemap layers to Gray Canvas, Street Map, Topo Map
    - Add Ocean basemap.
    - If these features don’t slow down the app, can you add:
        - MPAs from the WDPA data set (only when countries are selected)
        - Coastal ecosystems such as mangroves, coral reefs, saltmarshes, seagrass (when countries are selected)
  
- Get real data and integrate
- Start drafting manual for updating, etc.

## Instructions for contributing

To contribute to the development of this web application please follow these instructions:

1. [Fork and clone](https://happygitwithr.com/fork-and-clone) the github repository
2. Start a new [development branch](https://happygitwithr.com/git-branches.html?q=branch#create-a-new-branch)
3. Make edits to scripts and files - pull, commit and push regularly to your development branch. [See below information on navigating the R package to make edits](#navigating-and-editing-oceansdash)
4. When your edits are complete, make a [pull request](https://happygitwithr.com/pr-extend.html?q=pull%20request#pr-extend) and merge if there are no conflicts.

## Navigating and editing OceansDash

If you are further developing {OceansDash}, start by:

1. Opening the **'dev/02_dev.R'** script. 
- This is where you can: 
  - A) add packages, 
  - B) add modules, and 
  - C) add ‘business’ logic (as opposed to application logic) in the form of of functions (add_fct) or utilities (add_utils) - the latter being smaller functions that will be used several times. [Read more here](https://engineering-shiny.org/build-app-golem.html)

2. Opening the **'data-raw/make-sysdata.R'** script.
- Here you can import and wrangle data to be used internally by the app. Make sure to add it to the 'sysdata.rda' at the bottom of the script. Run through all lines of code in the script to update all internal datasets and overwrite the current 'sysdata.rda'.

3. Opening the **'R/'** folder.
- Here you will find the following R scripts and files:
  - A) The `app_ui.R` and `app_server.R` files that serve to provide the main app structure and integrate modules,
  - B) Any modules (aka 'sub-apps', e.g., `mod_main.R`), and
  - C) The `sysdata.rda` file created via Step 2 above
  
4. Once you have made changes to any of the above, you can run the development version of the app via:

``` r
golem::run_dev
```

5. If you want to deploy the app to a shinyapps.io server, run the development version as above and hit 'Publish' on the top right corner of the app as it is running.

*As you can see, there are many other files in the {OceansDash} package that are not discussed here. Those not mentioned are not neccesary for app development, but you can find more information on what they do/how to use them [here](https://engineering-shiny.org/build-app-golem.html)*

## Tips and Tricks

TODO: here add any tips/tricks for editing/developing app

